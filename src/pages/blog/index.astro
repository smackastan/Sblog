---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

const posts = (await getCollection("blog")).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<BaseLayout
	title="Research Log - Ashman Lab"
	description="Archive of data science experiments and articles."
>
	<section class="prose prose-lg prose-stone max-w-none mb-16">
		<h1 class="text-4xl font-serif font-bold text-gray-900 mb-6">
			Research Log
		</h1>
		<p class="text-xl text-gray-600">
			A chronological archive of my research, experiments, and thoughts on
			data science.
		</p>
	</section>

	<section class="space-y-12">
		{
			posts.map((post) => (
				<article class="flex flex-col md:flex-row gap-8 items-start border-b border-gray-100 pb-12 last:border-0">
					<div class="md:w-1/4 flex-shrink-0 pt-2">
						<time
							datetime={post.data.pubDate.toISOString()}
							class="text-sm font-mono text-gray-500 block"
						>
							{post.data.pubDate.toLocaleDateString("en-us", {
								year: "numeric",
								month: "long",
								day: "numeric",
							})}
						</time>
						<div class="mt-2">
							<span class="inline-block bg-gray-100 rounded-full px-3 py-1 text-xs font-semibold text-gray-600 mr-2 mb-2">
								Data Science
							</span>
						</div>
					</div>
					<div class="flex-1">
						<h2 class="text-2xl font-serif font-bold text-gray-900 mb-3 hover:text-accent transition-colors">
							<a
								href={`/blog/${post.slug}/`}
								class="no-underline"
							>
								{post.data.title}
							</a>
						</h2>
						<p class="text-gray-600 mb-4 leading-relaxed">
							{post.data.description}
						</p>
						<a
							href={`/blog/${post.slug}/`}
							class="text-accent font-medium hover:underline text-sm uppercase tracking-wide"
						>
							Read Article &rarr;
						</a>
					</div>
				</article>
			))
		}
	</section>
</BaseLayout>
