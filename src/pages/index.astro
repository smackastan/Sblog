---
import BaseLayout from "../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

const posts = (await getCollection("blog")).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<BaseLayout title="Ashman Lab" description="Data Science Portfolio & Blog">
	<section class="prose prose-lg prose-stone max-w-none mb-16">
		<h1 class="text-5xl font-serif font-bold text-gray-900 mb-6">
			Ashman Lab
		</h1>
		<p class="text-xl text-gray-600 leading-relaxed">
			Welcome to my research lab. Here I document my experiments in data
			science, artificial intelligence, and software engineering. This
			digital garden reflects my journey through the complexities of
			modern computing.
		</p>
	</section>

	<section>
		<h2
			class="text-2xl font-serif font-bold text-gray-900 mb-8 border-b border-gray-200 pb-2"
		>
			Latest Research
		</h2>
		<div class="grid gap-8">
			{
				posts.map((post) => (
					<article class="flex flex-col md:flex-row gap-6 group items-start">
						{post.data.heroImage && (
							<a
								href={`/blog/${post.slug}/`}
								class="md:w-1/3 flex-shrink-0"
							>
								<img
									width={720}
									height={360}
									src={post.data.heroImage}
									alt=""
									class="rounded-lg shadow-sm group-hover:shadow-md transition-shadow object-cover aspect-video"
								/>
							</a>
						)}
						<div class="flex-1">
							<div class="text-sm text-gray-500 font-mono mb-2">
								<time
									datetime={post.data.pubDate.toISOString()}
								>
									{post.data.pubDate.toLocaleDateString(
										"en-us",
										{
											year: "numeric",
											month: "long",
											day: "numeric",
										}
									)}
								</time>
							</div>
							<h3 class="text-2xl font-serif font-bold text-gray-900 mb-2 group-hover:text-accent transition-colors">
								<a
									href={`/blog/${post.slug}/`}
									class="no-underline"
								>
									{post.data.title}
								</a>
							</h3>
							<p class="text-gray-600 mb-4">
								{post.data.description}
							</p>
							<a
								href={`/blog/${post.slug}/`}
								class="text-accent font-medium hover:underline inline-flex items-center"
							>
								Read full article
								<svg
									xmlns="http://www.w3.org/2000/svg"
									class="h-4 w-4 ml-1"
									fill="none"
									viewBox="0 0 24 24"
									stroke="currentColor"
								>
									<path
										stroke-linecap="round"
										stroke-linejoin="round"
										stroke-width="2"
										d="M17 8l4 4m0 0l-4 4m4-4H3"
									/>
								</svg>
							</a>
						</div>
					</article>
				))
			}
		</div>
	</section>
</BaseLayout>
